---
interface Props {
  type?: 'card' | 'list' | 'page' | 'inline';
  count?: number;
  message?: string;
  class?: string;
}

const { 
  type = 'card', 
  count = 1, 
  message = 'Loading...',
  class: className = ''
} = Astro.props;
---

<div class={`loading-state ${className}`} role="status" aria-label={message}>
  {type === 'card' && (
    <div class="responsive-grid">
      {Array.from({ length: count }, (_, i) => (
        <div key={i} class="card bg-base-100 shadow-xl animate-pulse">
          <div class="loading-skeleton h-48 rounded-t-lg"></div>
          <div class="card-body">
            <div class="loading-skeleton h-6 w-3/4 mb-2 rounded"></div>
            <div class="loading-skeleton h-4 w-1/2 mb-4 rounded"></div>
            <div class="space-y-2">
              <div class="loading-skeleton h-3 w-full rounded"></div>
              <div class="loading-skeleton h-3 w-5/6 rounded"></div>
              <div class="loading-skeleton h-3 w-4/6 rounded"></div>
            </div>
            <div class="card-actions justify-end mt-4">
              <div class="loading-skeleton h-8 w-24 rounded"></div>
            </div>
          </div>
        </div>
      ))}
    </div>
  )}
  
  {type === 'list' && (
    <div class="space-y-4">
      {Array.from({ length: count }, (_, i) => (
        <div key={i} class="flex items-center space-x-4 p-4 bg-base-100 rounded-lg animate-pulse">
          <div class="loading-skeleton w-16 h-16 rounded-lg"></div>
          <div class="flex-1 space-y-2">
            <div class="loading-skeleton h-5 w-3/4 rounded"></div>
            <div class="loading-skeleton h-4 w-1/2 rounded"></div>
            <div class="loading-skeleton h-3 w-5/6 rounded"></div>
          </div>
          <div class="loading-skeleton h-8 w-20 rounded"></div>
        </div>
      ))}
    </div>
  )}
  
  {type === 'page' && (
    <div class="min-h-screen flex items-center justify-center bg-base-200">
      <div class="text-center">
        <div class="loading loading-spinner loading-lg text-primary mb-4"></div>
        <h2 class="text-xl font-semibold text-base-content mb-2">{message}</h2>
        <p class="text-base-content/70">Please wait while we load the content...</p>
      </div>
    </div>
  )}
  
  {type === 'inline' && (
    <div class="flex items-center justify-center py-8">
      <div class="flex items-center space-x-3">
        <div class="loading loading-spinner loading-md text-primary"></div>
        <span class="text-base-content/70">{message}</span>
      </div>
    </div>
  )}
  
  <span class="sr-only">{message}</span>
</div>

<style>
  .loading-state {
    width: 100%;
  }
  
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
  
  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  /* Reduce animation for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-pulse {
      animation: none;
    }
    
    .loading-skeleton {
      opacity: 0.6;
    }
  }
</style>